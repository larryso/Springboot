<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
        <title>回收员后台系统</title>
        <!-- 引入 WeUI -->
        <link rel="stylesheet" href="lib/weui.min.css"/>
        <link rel="stylesheet" href="lib/jquery-weui.min.css"/>
    </head>
   <body>
    
    
     <header style=" padding: 35px 0;">
      <h1 style="text-align: center;font-size: 34px;color: #3cc51f;font-weight: 400;margin: 0 15%;">回收员后台系统</h1>
    </header>

<form id="login_form" action="./login_submit" method="post">
    <div class="weui-cells weui-cells_form">
      <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">输入手机号：</label></div>
        <div class="weui-cell__bd">
          <input id="login_name_id" class="weui-input" type="number" pattern="[0-9]*" placeholder="输入手机号" name="login_name">
        </div>
      </div>
       
        <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">输入密码：</label></div>
        <div class="weui-cell__bd">
          <input id="password_id" class="weui-input" type="password" placeholder="输入密码" name="password">
        </div>
      </div>
    
     
      <div class="weui-cell weui-cell_vcode">
        <div class="weui-cell__hd"><label class="weui-label">验证码:</label></div>
        <div class="weui-cell__bd">
          <input id="vCode_id" class="weui-input" type="number" placeholder="请输入计算结果" name="vcode">
        </div>
        <div class="weui-cell__ft">
          <img id="vcode_id" class="weui-vcode-img" src="/captcha.png" οnclick="changeImg(this)">
        </div>
      </div>
    </div>
 </form>
    <div class="weui-btn-area">
      <a class="weui-btn weui-btn_primary" href="javascript:" id="login_id">登录</a>
    </div>
    <div class="weui-footer">
  				<p class="weui-footer__text">Copyright © 上饶市宸讯科技有限公司</p>
			</div>
     <script src="lib/jquery-2.1.4.js"></script>
     <script src="lib/jquery-weui.js"></script>
    <script type="text/javascript">
    	 $(document).ready(function(){
    	 	 $("#vcode_id").click(function(){
    	 	 	//alert("test");
    	 	 	$("#vcode_id").attr('src',"/captcha.png?t="+new Date().getTime());
    	 	 	  //$("#vcode_id").src = "/captcha.png?t="+new Date().getTime();
 			 });
 			  $("#login_id").click(function(){
    	 	 	 if($("#login_name_id").val() ==""){
    	 	 			$.alert("请输入手机号码");
        		  	return false;
    	 	}else if($("#login_name_id").val() !=""){
        			var value = $("#login_name_id").val();
        		 	var rex = /^1[3-9]+\d{9}$/;
        		  	var rex2 = /^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;
        		 	 if (rex.test(value) || rex2.test(value)) {
        		  	}else{
        		  		$.alert("请输入正确格式的手机号码");
        		  		return false;
        		  }
        	 }
        	 
        	 if($("#password_id").val() ==""){
        				$.alert("请输入密码");
        		  	return false;
        		}
        		if($("#vCode_id").val() ==""){
        				$.alert("请输入验证码");
        		  	return false;
        		}
    	 	 	$("#login_form").submit();
 			 });
    	 });
    </script>
      <script type="text/javascript" th:if="${errorMsg == 'invalid username'}" >
    $.alert("用户名不存在!");
    </script>
    <script type="text/javascript" th:if="${errorMsg == 'invalid password'}" >
    $.alert("密码输入不正确!");
    </script>
        <script type="text/javascript" th:if="${errorMsg == 'invalid vCode'}" >
    $.alert("验证码输入不正确!");
    </script>
    </body>
</html>